
  "MamtaMedicalConnection": {
    "ConnectionString": "mongodb://localhost:27017",
    "DatabaseName": "MamtaMedical"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "MamtaMedical": "Data Source = localhost,1433; Initial Catalog = Mamtamedicaldb; User Id=sa;Password=kali"
  }
}

//Create Connection model
  public class MamtaMedicalConnection
    {
        public string ConnectionString { get; set; }
        public string DatabaseName { get; set; }
    }

//program.cs
builder.Services.AddSingleton<IMongoDatabase>(c =>
{
    var mongosetting = builder.Configuration.GetSection("MamtaMedicalConnection").Get<MamtaMedicalConnection>();
    var client = new MongoClient(mongosetting.ConnectionString);
    return client.GetDatabase(mongosetting.DatabaseName);
});

//Repository

 private readonly IMongoCollection<MongoCategory> mongo;
        private readonly IMongoCollection<MongoProducts> Product;
        public CategoryAction(IMongoDatabase database)
        {

            this.mongo = database.GetCollection<MongoCategory>("Category");
            this.Product = database.GetCollection<MongoProducts>("Products");
        }
//insert into db
    public void AddCategory(CategoryModel m)
        {
            MongoCategory category = new MongoCategory();
            category._id = m.Category_id;
            category.Category_id = m.Category_id;
            category.Category_name = m.Category_name;   
            category.Image_name = m.Image_name;
            category.Image = m.Category_id;
            category.Description=m.Description;
            mongo.InsertOne(category);
           
        }
// 2nd option 
        private readonly IMongoCollection<MongoBrands> mongo;
        private readonly IMongoCollection<MongoProducts> Product;
        private readonly IMongoCollection<MongoCategory> Cat;
        public MongoContext(IMongoDatabase database)
        {

            this.mongo = database.GetCollection<MongoBrands>("Brands");
            this.Product = database.GetCollection<MongoProducts>("Products");
            this.Cat = database.GetCollection<MongoCategory>("Category");
        }
        public IMongoCollection<MongoBrands> Brands()
        {
            return mongo;
        }
        public IMongoCollection<MongoProducts> Products()
        {
            return Product;
        }
        public IMongoCollection<MongoCategory> Category()
        {
            return Cat;
        }
        /*public  IMongoCollection<MongoBrands> Brand { get { return mongo; } set { Brand = mongo; } }*/
    }

builder.Services.AddSingleton<MongoContext>();
